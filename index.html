<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Budggt Lite</title>

<style>
body{
  background:#0e1621;
  color:white;
  font-family:system-ui;
}

.app{
  max-width:420px;
  margin:auto;
  padding:10px;
}

input,select,button{
  width:100%;
  padding:12px;
  margin:6px 0;
}

.log{
  background:black;
  padding:6px;
  font-size:11px;
  height:60px;
  overflow:auto;
}
</style>

</head>

<body>

<div class="app">

<h2>Budggt Lite</h2>

<div id="saldo">Rp 0</div>

<input id="nama" placeholder="Keterangan">
<input id="jumlah" type="number" placeholder="Nominal">

<select id="tipe">
<option value="masuk">Pemasukan</option>
<option value="keluar">Pengeluaran</option>
</select>

<button id="btnSimpan">SIMPAN</button>

<h3>Riwayat</h3>
<div id="list"></div>

<h4>Debug Log</h4>
<div class="log" id="log"></div>

</div>

<script>
// ===== DEBUG TOOL =====
function log(t){
  document.getElementById("log").innerHTML += t + "<br>"
}

// TEST AWAL
log("Script terbaca ✔")

// ===== DATABASE =====
let db = JSON.parse(localStorage.getItem("budggt")) || []
log("DB dimuat: " + db.length)

// ===== RENDER =====
function render(){
  log("Render jalan")

  let list = document.getElementById("list")
  let saldo = 0
  list.innerHTML=""

  db.forEach(x=>{
    saldo += x.tipe=="masuk" ? x.jumlah : -x.jumlah

    list.innerHTML += `
    <div>
      ${x.nama} - Rp ${x.jumlah}
    </div>`
  })

  document.getElementById("saldo").innerText =
    "Rp " + saldo.toLocaleString()

  localStorage.setItem("budggt",JSON.stringify(db))
}

// ===== FUNGSI TAMBAH =====
function tambah(){

  log("Tombol ditekan!")

  let nama = document.getElementById("nama").value
  let jumlah = Number(document.getElementById("jumlah").value)
  let tipe = document.getElementById("tipe").value

  log("data: " + nama + " | " + jumlah)

  if(!nama || !jumlah){
    alert("Isi dulu datanya")
    return
  }

  db.unshift({nama,jumlah,tipe})

  render()

  document.getElementById("nama").value=""
  document.getElementById("jumlah").value=""
}

// ===== PASANG EVENT =====
document.getElementById("btnSimpan")
  .addEventListener("click", tambah)

log("Event listener terpasang ✔")

render()
</script>

</body>
</html>
